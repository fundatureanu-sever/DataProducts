---
title: ""
author: "Sever Fundatureanu"
output: html_document
---

#### August 02, 2017

```{r cache=TRUE, echo=FALSE, warning=FALSE}
require(plotly, quietly=TRUE, warn.conflicts = FALSE)
landSalesRomania <- read.csv("ancpivanzari201703.csv", header=TRUE, sep=",")
landSalesRomania$TIP_PROPRIETATE <- as.character(landSalesRomania$TIP_PROPRIETATE)
landSalesRomania[landSalesRomania$TIP_PROPRIETATE=="-", "TIP_PROPRIETATE"] <- "Other"
forPlotly <- landSalesRomania[,c(2,4,5)]
forPlotly$TIP_PROPRIETATE <- gsub("^agricol$", "Agricultural", forPlotly$TIP_PROPRIETATE)
forPlotly$TIP_PROPRIETATE <- gsub("^apartamente$", "Apartments", forPlotly$TIP_PROPRIETATE)
forPlotly$TIP_PROPRIETATE <- gsub("^cu constructii$", "With Construction", forPlotly$TIP_PROPRIETATE)
forPlotly$TIP_PROPRIETATE <- gsub("^fara constructii$", "Without Construction", forPlotly$TIP_PROPRIETATE)
forPlotly$TIP_PROPRIETATE <- gsub("^neagricol$", "Not Agricultural", forPlotly$TIP_PROPRIETATE)

f <- list(
    family = "sans",
    size = 16,
    color = "#000000"
)

x <- list(
    title = "County",
    titlefont = f
)
y <- list(
    title = "Land Type",
    titlefont = f,
    ticks = "inside",
    tickangle = -45
)
plot_ly(y=forPlotly$TIP_PROPRIETATE, x=forPlotly$JUDET, z=forPlotly$VANZARI, 
        type="heatmap", colors="Spectral") %>% 
    layout(title="Distribution of Land Sales in Romania, March 2017",
                 xaxis=x, yaxis=y, height=600, width=800,
                 margin=list(l=155, r=50, b=150, t=40, pad=4))
```